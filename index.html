<!DOCTYPE html>
<html lang="kk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Qazaq Voice AI</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body { font-family: sans-serif; background: #1c1c1c; color: white; text-align: center; padding: 20px; }
        textarea { width: 90%; height: 150px; border-radius: 10px; padding: 10px; margin-top: 20px; }
        button { background: #0088cc; color: white; border: none; padding: 15px 30px; border-radius: 50px; font-size: 18px; margin-top: 20px; cursor: pointer; }
        .status { margin-top: 10px; font-size: 14px; color: #aaa; }
    </style>
</head>
<body>
    <h1>Qazaq AI Voice üéôÔ∏è</h1>
    <p>–ú”ô—Ç—ñ–Ω–¥—ñ –∂–∞–∑—ã“£—ã–∑, –º–µ–Ω –æ–Ω—ã “õ–∞–∑–∞“õ—à–∞ –æ“õ–∏–º—ã–Ω</p>

    <textarea id="textInput" placeholder="–û—Å—ã –∂–µ—Ä–≥–µ –º”ô—Ç—ñ–Ω –∂–∞–∑..."></textarea>
    <br>
    <button onclick="speakText()">–î–∞—É—ã—Å—Ç–∞—É üîä</button>
    <div id="status" class="status"></div>

    <script>
        // Telegram WebApp –±–∞–ø—Ç–∞—É–ª–∞—Ä—ã
        let tg = window.Telegram.WebApp;
        tg.expand(); // –≠–∫—Ä–∞–Ω–¥—ã —Ç–æ–ª—ã“õ –∞—à—É

        function speakText() {
            const text = document.getElementById('textInput').value;
            const status = document.getElementById('status');

            if (!text) {
                alert("–ú”ô—Ç—ñ–Ω –±–æ—Å!");
                return;
            }

            // –ë—Ä–∞—É–∑–µ—Ä–¥—ñ“£ –¥–∞—É—ã—Å—Ç–∞—É —Ñ—É–Ω–∫—Ü–∏—è—Å—ã (SpeechSynthesis)
            const synth = window.speechSynthesis;
            const utterance = new SpeechSynthesisUtterance(text);
            
            // “ö–∞–∑–∞“õ—à–∞ –¥–∞—É—ã—Å—Ç—ã —ñ–∑–¥–µ—É
            const voices = synth.getVoices();
            const kzVoice = voices.find(v => v.lang.includes('kk') || v.lang.includes('kz'));

            if (kzVoice) {
                utterance.voice = kzVoice;
            } else {
                status.innerText = "–ï—Å–∫–µ—Ä—Ç—É: “ö“±—Ä—ã–ª“ì—ã“£—ã–∑–¥–∞ “õ–∞–∑–∞“õ—à–∞ –¥–∞—É—ã—Å —Ç–∞–±—ã–ª–º–∞–¥—ã, —Å—Ç–∞–Ω–¥–∞—Ä—Ç—Ç—ã –¥–∞—É—ã—Å “õ–æ–ª–¥–∞–Ω—ã–ª–∞–¥—ã.";
            }

            utterance.rate = 1.0; // –ñ—ã–ª–¥–∞–º–¥—ã“ì—ã
            utterance.pitch = 1.0; // –î–∞—É—ã—Å –±–∏—ñ–∫—Ç—ñ–≥—ñ

            status.innerText = "–û“õ—ã–ø –∂–∞—Ç—ã—Ä–º—ã–Ω...";
            synth.speak(utterance);

            utterance.onend = () => {
                status.innerText = "–ê—è“õ—Ç–∞–ª–¥—ã!";
            };
        }
    </script>
</body>
</html>
