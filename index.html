<!DOCTYPE html>
<html lang="kk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>TG Clone Mini App</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        :root {
            --tg-blue: #248bcf;
            --tg-bg: #ffffff;
            --tg-secondary: #f4f4f5;
            --tg-text: #000000;
            --tg-hint: #999999;
            --vip-gold: #ffd700;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, sans-serif;
            background-color: var(--tg-bg);
            color: var(--tg-text);
            margin: 0;
            padding: 0;
            user-select: none;
        }

        /* Navigation Bar */
        .nav-bar {
            display: flex;
            justify-content: space-around;
            background: var(--tg-bg);
            border-bottom: 1px solid #eee;
            position: sticky;
            top: 0;
            z-index: 1000;
        }
        .nav-item {
            padding: 15px;
            font-weight: 500;
            color: var(--tg-hint);
            cursor: pointer;
            flex: 1;
            text-align: center;
            transition: 0.3s;
        }
        .nav-item.active {
            color: var(--tg-blue);
            border-bottom: 3px solid var(--tg-blue);
        }

        /* Content Sections */
        .page { display: none; padding-bottom: 80px; }
        .page.active { display: block; }

        /* Profile Page */
        .profile-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            background: var(--tg-secondary);
        }
        .avatar-wrapper {
            position: relative;
            margin-bottom: 15px;
        }
        .main-avatar {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            object-fit: cover;
            border: 2px solid #ddd;
        }
        .vip-frame {
            border: 4px solid var(--vip-gold) !important;
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.5);
        }
        .vip-tag {
            position: absolute;
            bottom: -5px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--vip-gold);
            color: black;
            font-size: 10px;
            font-weight: bold;
            padding: 2px 8px;
            border-radius: 10px;
            display: none;
        }

        .input-field {
            width: 90%;
            background: white;
            margin: 10px 0;
            padding: 12px;
            border-radius: 12px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.05);
        }
        .input-field label { font-size: 12px; color: var(--tg-blue); display: block; }
        .input-field input, .input-field textarea {
            border: none; width: 100%; outline: none; font-size: 16px; margin-top: 5px;
        }

        /* Chat List */
        .chat-item {
            display: flex;
            align-items: center;
            padding: 12px 15px;
            border-bottom: 1px solid #f0f0f0;
        }
        .chat-item img { width: 55px; height: 55px; border-radius: 50%; margin-right: 15px; }
        .chat-info { flex: 1; }
        .chat-info h4 { margin: 0; font-size: 16px; }
        .chat-info p { margin: 5px 0 0; font-size: 14px; color: var(--tg-hint); }

        /* Floating Button */
        .fab {
            position: fixed;
            bottom: 25px;
            right: 25px;
            background: var(--tg-blue);
            color: white;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 12px rgba(36, 139, 207, 0.4);
            font-size: 30px;
            cursor: pointer;
        }

        .btn-save {
            background: var(--tg-blue);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 10px;
            font-weight: bold;
            margin-top: 20px;
            width: 90%;
        }
    </style>
</head>
<body>

<div class="nav-bar">
    <div class="nav-item active" onclick="openTab('chats', this)">Чаттар</div>
    <div class="nav-item" onclick="openTab('groups', this)">Топтар</div>
    <div class="nav-item" onclick="openTab('settings', this)">Баптаулар</div>
</div>

<div id="chats" class="page active">
    <div class="chat-item">
        <img src="https://cdn-icons-png.flaticon.com/512/2111/2111646.png">
        <div class="chat-info">
            <h4>Telegram Support</h4>
            <p>Қош келдіңіз! Бұл сіздің жеке мессенджеріңіз.</p>
        </div>
    </div>
</div>

<div id="groups" class="page">
    <div id="group-container">
        <div class="chat-item">
            <img src="https://cdn-icons-png.flaticon.com/512/3135/3135715.png">
            <div class="chat-info">
                <h4>Жалпы топ</h4>
                <p>Бұл әзірге жалғыз топ</p>
            </div>
        </div>
    </div>
    <div class="fab" onclick="createNewGroup()">+</div>
</div>

<div id="settings" class="page">
    <div class="profile-container">
        <div class="avatar-wrapper" id="avatarFrame">
            <img src="https://via.placeholder.com/100" id="userImg" class="main-avatar">
            <div class="vip-tag" id="vipTag">VIP</div>
        </div>
        <h2 id="nameLabel">Аты-жөні</h2>
        <p id="userLabel" style="color: var(--tg-blue); margin: 0;">@username</p>
    </div>

    <center>
        <div class="input-field">
            <label>Толық есіміңіз</label>
            <input type="text" id="inpName" placeholder="Атыңызды енгізіңіз">
        </div>
        <div class="input-field">
            <label>Юзернейм</label>
            <input type="text" id="inpUser" placeholder="@username">
        </div>
        <div class="input-field">
            <label>Өзіңіз туралы (Био)</label>
            <textarea id="inpBio" rows="2" placeholder="Сипаттама жазыңыз..."></textarea>
        </div>
        <div class="input-field">
            <label>Аватар URL</label>
            <input type="text" id="inpImg" placeholder="Сурет сілтемесі">
        </div>

        <button class="btn-save" onclick="saveProfile()">Сақтау</button>
        <button onclick="activateVip()" style="margin-top: 15px; background: none; border: 1px solid gold; color: orange; padding: 5px 10px; border-radius: 5px;">VIP Мәртебесін алу</button>
    </center>
</div>

<script>
    const tg = window.Telegram.WebApp;
    tg.expand();

    // Мәліметтерді жүктеу (LocalStorage)
    window.onload = function() {
        const savedData = JSON.parse(localStorage.getItem('tgUser')) || {};
        if(savedData.name) {
            document.getElementById('inpName').value = savedData.name;
            document.getElementById('nameLabel').innerText = savedData.name;
        }
        if(savedData.user) {
            document.getElementById('inpUser').value = savedData.user;
            document.getElementById('userLabel').innerText = savedData.user;
        }
        if(savedData.bio) document.getElementById('inpBio').value = savedData.bio;
        if(savedData.img) {
            document.getElementById('inpImg').value = savedData.img;
            document.getElementById('userImg').src = savedData.img;
        }
        if(savedData.isVip) activateVip(true);
    };

    function openTab(id, el) {
        document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
        document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
        document.getElementById(id).classList.add('active');
        el.classList.add('active');
    }

    function saveProfile() {
        const data = {
            name: document.getElementById('inpName').value,
            user: document.getElementById('inpUser').value,
            bio: document.getElementById('inpBio').value,
            img: document.getElementById('inpImg').value,
            isVip: document.getElementById('userImg').classList.contains('vip-frame')
        };
        
        localStorage.setItem('tgUser', JSON.stringify(data));
        document.getElementById('nameLabel').innerText = data.name;
        document.getElementById('userLabel').innerText = data.user;
        document.getElementById('userImg').src = data.img || "https://via.placeholder.com/100";
        
        alert("Профиль сақталды!");
    }

    function activateVip(isLoad = false) {
        document.getElementById('userImg').classList.add('vip-frame');
        document.getElementById('vipTag').style.display = 'block';
        if(!isLoad) alert("Құттықтаймыз! Сіз VIP болдыңыз және алтын рамка алдыңыз.");
    }

    function createNewGroup() {
        const name = prompt("Топ атауын енгізіңіз:");
        const bio = prompt("Топ сипаттамасы:");
        if(name) {
            const container = document.getElementById('group-container');
            const html = `
                <div class="chat-item">
                    <img src="https://cdn-icons-png.flaticon.com/512/681/681494.png">
                    <div class="chat-info">
                        <h4>${name}</h4>
                        <p>${bio || 'Сипаттама жоқ'}</p>
                    </div>
                </div>
            `;
            container.innerHTML += html;
        }
    }
</script>

</body>
</html>

